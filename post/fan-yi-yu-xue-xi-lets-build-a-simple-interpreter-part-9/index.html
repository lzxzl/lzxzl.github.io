<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
<title>
    ztree
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://fastly.jsdelivr.net">
<meta name="author" content="ztree">
<meta name="description" content="ç«¹æ–èŠ’é‹è½»èƒœé©¬ï¼Œè°æ€•ï¼Ÿä¸€è“‘çƒŸé›¨ä»»å¹³ç”Ÿã€‚">
<meta name="keywords" content="Binary">
<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
<link rel="stylesheet" href="https://lzxzl.github.io/styles/main.css" />
<link href="https://fastly.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/1.7.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/css/style.min.css" />
    <script src="https://fastly.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/tocbot.min.js"></script>
    <script src="https://fastly.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/script.min.js"></script>
    <script src="https://fastly.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/icon.min.js"></script>
    
            <script src="https://fastly.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/Card/prism.min.js"></script>
            <link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/css/Card/prism.min.css" />
            <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css">
            <script defer src="https://fastly.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js"></script>
            
                        <!--CDNæ ·å¼-->
                        <script src="https://fastly.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/hit-kounter-lc-0.3.0.js"></script>
                        <script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
                        
                            <script>
                                (function() {
                                    var bp = document.createElement('script');
                                    var curProtocol = window.location.protocol.split(':')[0];
                                    if (curProtocol === 'https') {
                                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                                    } else {
                                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                                    }
                                    var s = document.getElementsByTagName("script")[0];
                                    s.parentNode.insertBefore(bp, s);
                                })();
                            </script>
                            
</head>

<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo">
                <a href="https://lzxzl.github.io">
                    ztree
                </a>
            </div>
            <div id="tp-weather-widget"></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/">
                        é¦–é¡µ
                    </a>
                    
                    <a class="menu-item" href="/archives">
                        å½’æ¡£
                    </a>
                    
                    <a class="menu-item" href="/tags">
                        æ ‡ç­¾
                    </a>
                    
                    <a class="menu-item" href="/post/about">
                        å…³äº
                    </a>
                    
                        <input id="switch_default" type="checkbox" class="switch_default">
                        <label for="switch_default" class="toggleBtn"></label>
            </div>
            <form id="gridea-search-form" data-update="1747748455692" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
            </form>
        </div>
    </nav>

    
        <nav class="navbar-mobile" id="nav-mobile">
            <div class="container">
                <div class="navbar-header">
                    <div>
                        <a href="https://lzxzl.github.io">
                            ztree
                        </a>
                        <!--en-->
                        <a id="mobile-toggle-theme-en" class="a en">&nbsp;Dark</a>
                        <!--zh-->
                        <a id="mobile-toggle-theme-zh" class="a zh">&nbsp;&#x6697;&#x9ED1;</a>
                    </div>
                    <form id="gridea-search-form" data-update="1747748455692" action="/search/index.html">
                        <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
                    </form>
                    <!--en-->
                    <div class="menu-toggle" id="menu-toggle-en" onclick="mobileBtn()">&#9776; Menu</div>
                    <!--zh-->
                    <div class="menu-toggle" id="menu-toggle-zh" onclick="mobileBtn()">&#9776; &#x83DC;&#x5355;</div>

                </div>
                <div class="menu" id="mobile-menu">
                    
                        <a class="menu-item" href="/">
                            é¦–é¡µ
                        </a>
                        
                        <a class="menu-item" href="/archives">
                            å½’æ¡£
                        </a>
                        
                        <a class="menu-item" href="/tags">
                            æ ‡ç­¾
                        </a>
                        
                        <a class="menu-item" href="/post/about">
                            å…³äº
                        </a>
                        
                </div>
            </div>
        </nav>
</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementById("menu-toggle-en");
        var toggleMenu_zh = document.getElementById("menu-toggle-zh");

        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.display != "none") {
            if (toggleMenu.classList.contains("active")) {
                toggleMenu.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu.classList.add("active")
                mobileMenu.classList.add("active")
            }
        } else if (toggleMenu_zh.display != "none") {
            if (toggleMenu_zh.classList.contains("active")) {
                toggleMenu_zh.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu_zh.classList.add("active")
                mobileMenu.classList.add("active")
            }
        }

    }
</script>



    <script>
        (function(a, h, g, f, e, d, c, b) {
            b = function() {
                d = h.createElement(g);
                c = h.getElementsByTagName(g)[0];
                d.src = e;
                d.charset = "utf-8";
                d.async = 1;
                c.parentNode.insertBefore(d, c)
            };
            a["SeniverseWeatherWidgetObject"] = f;
            a[f] || (a[f] = function() {
                (a[f].q = a[f].q || []).push(arguments)
            });
            a[f].l = +new Date();
            if (a.attachEvent) {
                a.attachEvent("onload", b)
            } else {
                a.addEventListener("load", b, false)
            }
        }(window, document, "script", "SeniverseWeatherWidget", "//cdn.sencdn.com/widget2/static/js/bundle.js?t=" + parseInt((new Date().getTime() / 100000000).toString(), 10)));
        window.SeniverseWeatherWidget('show', {
            flavor: "slim",
            location: "WWEFQFPJZ7T8",
            geolocation: true,
            language: "auto",
            unit: "c",
            theme: "auto",
            token: "61bcc333-3305-4728-9465-6785274bb0a3",
            hover: "enabled",
            container: "tp-weather-widget"
        })
    </script>
    
            <div class="main">
                <div class="container">
                    <article class="post-wrap">
                        <header class="post-header">
                            <h1 class="post-title">
                                [ç¿»è¯‘ä¸å­¦ä¹ ] Let&#39;s Build A Simple Interpreter. Part 9
                            </h1>
                            
                                    <!--zh-->
                                    <div class="post-meta zh">
                                        &#x4F5C;&#x8005;:
                                        <a itemprop="author" rel="author" href="/">
                                            ztree
                                        </a>
                                        <span class="post-time">&#x65E5;&#x671F;: <a href="#">2021-12-06</a></span>
                                        <span class="post-readtime">&#x9605;&#x8BFB;&#x65F6;&#x95F4;:<a
                                    href="#">33.5
                                    &#x5206;&#x949F;</a></span>
                                        <span class="post-words">&#x5B57;&#x6570;:<a href="#">6998</a></span>
                                        
                                            <span class="post-category">&#x5206;&#x7C7B;:
                                
                                <a href="https://lzxzl.github.io/tag/GqQg6_YXk/">ç¼–è¯‘åŸç†</a>
                                
                            </span>
                                            
                                                é˜…è¯»é‡:
                                                <span data-hk-page="current"> - </span>
                                                
                                    </div>
                                    
                        </header>
                        
                        <div class="post-content">
                            <p>I remember when I was in university (a long time ago) and learning systems programming, I believed that the only â€œrealâ€ languages were Assembly and C. And Pascal was - how to put it nicely - a very high-level language used by application developers who didnâ€™t want to know what was going on under theÂ hood.</p>
<p>æˆ‘è®°å¾—å½“æˆ‘åœ¨å¤§å­¦å­¦ä¹ ç³»ç»Ÿç¼–ç¨‹çš„æ—¶å€™(å¾ˆä¹…ä»¥å‰) ï¼Œæˆ‘ç›¸ä¿¡å”¯ä¸€â€œçœŸæ­£â€çš„è¯­è¨€æ˜¯æ±‡ç¼–è¯­è¨€å’Œ c è¯­è¨€ï¼Œè€Œ Pascal è¯­è¨€â€”â€”æ€ä¹ˆè¯´å¥½å¬ç‚¹â€”â€”æ˜¯ä¸€ç§éå¸¸é«˜çº§çš„è¯­è¨€ï¼Œè¢«é‚£äº›ä¸æƒ³çŸ¥é“èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆçš„åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜æ‰€ä½¿ç”¨ã€‚</p>
<p>Little did I know back then that I would be writing almost everything in Python (and love every bit of it) to pay my bills and that I would also be writing an interpreter and compiler for Pascal for the reasons I stated in <a href="https://ruslanspivak.com/lsbasi-part1/">the very first article of the series</a>.</p>
<p>å½“æ—¶æˆ‘å¹¶ä¸çŸ¥é“ï¼Œä¸ºäº†æ”¯ä»˜è´¦å•(???)ï¼Œæˆ‘å‡ ä¹è¦ç”¨ Python å†™æ‰€æœ‰çš„ä¸œè¥¿(å¹¶ä¸”å–œæ¬¢å®ƒçš„æ¯ä¸€ç‚¹) ï¼Œè€Œä¸”æˆ‘è¿˜è¦ä¸º Pascal ç¼–å†™ä¸€ä¸ªè§£é‡Šå™¨å’Œç¼–è¯‘å™¨ï¼ŒåŸå› æˆ‘åœ¨æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­å°±æåˆ°è¿‡ã€‚</p>
<p>These days, I consider myself a programming languages enthusiast, and Iâ€™m fascinated by all languages and their unique features. Having said that, I have to note that I enjoy using certain languages way more than others. I am biased and Iâ€™ll be the first one to admit that.Â ğŸ˜ƒ</p>
<p>è¿™äº›å¤©ï¼Œæˆ‘è®¤ä¸ºè‡ªå·±æ˜¯ä¸€ä¸ªç¼–ç¨‹è¯­è¨€çˆ±å¥½è€…ï¼Œæˆ‘ç€è¿·äºæ‰€æœ‰çš„è¯­è¨€å’Œå®ƒä»¬çš„ç‹¬ç‰¹åŠŸèƒ½ã€‚è¯è™½å¦‚æ­¤ï¼Œæˆ‘å¿…é¡»æŒ‡å‡ºï¼Œæˆ‘æ¯”å…¶ä»–äººæ›´å–œæ¬¢ä½¿ç”¨æŸäº›è¯­è¨€ã€‚æˆ‘æ˜¯æœ‰åè§çš„ï¼Œæˆ‘å°†æ˜¯ç¬¬ä¸€ä¸ªæ‰¿è®¤è¿™ä¸€ç‚¹çš„äººã€‚ğŸ˜ƒ</p>
<p>This is meÂ before:</p>
<p>è¿™æ˜¯æˆ‘ä»¥å‰çš„æ ·å­:</p>
<figure data-type="image" tabindex="1"><img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_story_before.png" alt="" loading="lazy"></figure>
<p>AndÂ now:</p>
<p>ç°åœ¨:</p>
<figure data-type="image" tabindex="2"><img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_story_now.png" alt="" loading="lazy"></figure>
<p>Okay, letâ€™s get down to business. Here is what youâ€™re going to learnÂ today:</p>
<p>å¥½äº†ï¼Œè®©æˆ‘ä»¬è¨€å½’æ­£ä¼ ã€‚ä»¥ä¸‹æ˜¯ä½ ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹:</p>
<ol>
<li>How to parse and interpret a Pascal programÂ definition. å¦‚ä½•è§£æå’Œè§£é‡Š Pascal ç¨‹åºå®šä¹‰</li>
<li>How to parse and interpret compoundÂ statements. å¦‚ä½•è§£æå’Œè§£é‡Šå¤åˆè¯­å¥</li>
<li>How to parse and interpret assignment statements, includingÂ variables. å¦‚ä½•è§£æå’Œè§£é‡Šèµ‹å€¼è¯­å¥ï¼ŒåŒ…æ‹¬å˜é‡</li>
<li>A bit about symbol tables and how to store and lookupÂ variables. å…³äºç¬¦å·è¡¨ä»¥åŠå¦‚ä½•å­˜å‚¨å’ŒæŸ¥æ‰¾å˜é‡</li>
</ol>
<p>Iâ€™ll use the following sample Pascal-like program to introduce newÂ concepts:</p>
<p>æˆ‘å°†ä½¿ç”¨ä¸‹é¢è¿™ä¸ªç±»ä¼¼ pascal çš„ç¨‹åºæ¥ä»‹ç»ä¸€äº›æ–°çš„æ¦‚å¿µ:</p>
<pre><code class="language-python">BEGIN
    BEGIN
        number := 2;
        a := number;
        b := 10 * a + 10 * number / 4;
        c := a - - b
    END;
    x := 11;
END.
</code></pre>
<p>You could say that thatâ€™s quite a jump from the command line interpreter you wrote so far by following the previous articles in the series, but itâ€™s a jump that I hope will bring excitement. Itâ€™s not â€œjustâ€ a calculator anymore, weâ€™re getting serious here, Pascal serious.Â ğŸ˜ƒ</p>
<p>å¯ä»¥è¯´ï¼Œè¿™ä¸æ‚¨åœ¨æœ¬ç³»åˆ—å‰å‡ ç¯‡æ–‡ç« ä¹‹åç¼–å†™çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ç›¸æ¯”ï¼Œæ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„è·³è½¬ï¼Œä½†æˆ‘å¸Œæœ›è¿™æ˜¯ä¸€ä¸ªå°†å¸¦æ¥ä»¤äººå…´å¥‹çš„ç»“æœçš„è·³è½¬ã€‚å®ƒä¸å†åªæ˜¯ä¸€ä¸ªâ€œè®¡ç®—å™¨â€ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå˜å¾—ä¸¥è‚ƒè®¤çœŸï¼ŒPascal è®¤çœŸã€‚ğŸ˜ƒ</p>
<p>Letâ€™s dive in and look at syntax diagrams for new language constructs and their corresponding grammarÂ rules.</p>
<p>è®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä¸€ä¸‹æ–°è¯­è¨€ç»“æ„çš„è¯­æ³•å›¾åŠå…¶ç›¸åº”çš„è¯­æ³•è§„åˆ™ã€‚</p>
<p>On your marks: Ready. Set.Â Go!</p>
<p>å„å°±å„ä½: é¢„å¤‡ï¼Œå¼€å§‹ï¼</p>
<figure data-type="image" tabindex="3"><img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_syntax_diagram_01.png" alt="" loading="lazy"></figure>
<ol>
<li>Iâ€™ll start with describing what a Pascal <em>program</em> is. A Pascal <em><strong>program</strong></em> consists of a <em>compound statement</em> that ends with a dot. Here is an example of aÂ program:<br>
æˆ‘å°†ä»æè¿°ä»€ä¹ˆæ˜¯ Pascal ç¨‹åºå¼€å§‹ã€‚Pascal ç¨‹åºç”±ä¸€ä¸ªä»¥ç‚¹ç»“å°¾çš„å¤åˆè¯­å¥ç»„æˆã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¨‹åºçš„ä¾‹å­:</li>
</ol>
<pre><code class="language-pascal">â€œBEGIN  END.â€
</code></pre>
<p>I have to note that this is not a complete program definition, and weâ€™ll extend it later in theÂ series.<br>
æˆ‘å¿…é¡»æŒ‡å‡ºï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºå®šä¹‰ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç³»åˆ—åé¢å¯¹å…¶è¿›è¡Œæ‰©å±•ã€‚</p>
<ol start="2">
<li>What is a <em>compound statement</em>? A <em><strong>compound statement</strong></em> is a block marked with BEGIN and END that can contain a list (possibly empty) of statements including other compound statements. Every statement inside the compound statement, except for the last one, must terminate with a semicolon. The last statement in the block may or may not have a terminating semicolon. Here are some examples of valid compoundÂ statements:<br>
ä»€ä¹ˆæ˜¯å¤åˆè¯­å¥ï¼Ÿå¤åˆè¯­å¥æ˜¯æ ‡è®°ä¸º BEGIN å’Œ END çš„å—ï¼Œå®ƒå¯ä»¥åŒ…å«åŒ…å«å…¶ä»–å¤åˆè¯­å¥çš„è¯­å¥åˆ—è¡¨(å¯èƒ½ä¸ºç©º)ã€‚é™¤äº†æœ€åä¸€ä¸ªè¯­å¥ä¹‹å¤–ï¼Œå¤åˆè¯­å¥ä¸­çš„æ‰€æœ‰è¯­å¥éƒ½å¿…é¡»ä»¥åˆ†å·ç»“æŸã€‚å—ä¸­çš„æœ€åä¸€ä¸ªè¯­å¥å¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ²¡æœ‰ç»ˆæ­¢åˆ†å·ã€‚ä¸‹é¢æ˜¯ä¸€äº›æœ‰æ•ˆçš„å¤åˆè¯­å¥çš„ä¾‹å­:</li>
</ol>
<pre><code class="language-pascal">â€œBEGIN ENDâ€
â€œBEGIN a := 5; x := 11 ENDâ€
â€œBEGIN a := 5; x := 11; ENDâ€
â€œBEGIN BEGIN a := 5 END; x := 11 ENDâ€
</code></pre>
<ol start="3">
<li>
<p>A <em><strong>statement list</strong></em> is a list of zero or more statements inside a compound statement. See above for someÂ examples.<br>
è¯­å¥åˆ—è¡¨æ˜¯å¤åˆè¯­å¥ä¸­åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªè¯­å¥çš„åˆ—è¡¨ã€‚</p>
</li>
<li>
<p>A <em><strong>statement</strong></em> can be a <em>compound statement</em>, an <em>assignment statement</em>, or it can be an <em>empty</em> statement.<br>
è¯­å¥å¯ä»¥æ˜¯å¤åˆè¯­å¥ã€èµ‹å€¼è¯­å¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ç©ºè¯­å¥ã€‚</p>
</li>
<li>
<p>An <em><strong>assignment statement</strong></em> is a variable followed by an ASSIGN token (two characters, â€˜:â€™ and â€˜=â€™) followed by anÂ expression.<br>
èµ‹å€¼è¯­å¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåè·Ÿä¸€ä¸ª ASSIGN æ ‡è®°(ä¸¤ä¸ªå­—ç¬¦ï¼Œâ€˜ :â€™å’Œâ€˜ =â€™) ï¼Œç„¶åæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p>
</li>
</ol>
<pre><code class="language-pascal">â€œa := 11â€
â€œb := a + 9 - 5 * 2â€ 
</code></pre>
<ol start="6">
<li>A <em><strong>variable</strong></em> is an identifier. Weâ€™ll use the ID token for variables. The value of the token will be a variableâ€™s name like â€˜aâ€™, â€˜numberâ€™, and so on. In the following code block â€˜aâ€™ and â€˜bâ€™ areÂ variables:<br>
å˜é‡æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚æˆ‘ä»¬å°†å¯¹å˜é‡ä½¿ç”¨ ID æ ‡è®°ã€‚tokençš„valueå°†æ˜¯å˜é‡çš„åç§°ï¼Œå¦‚â€˜ aâ€™ã€â€˜ numberâ€™ç­‰ç­‰ã€‚åœ¨ä¸‹é¢çš„ä»£ç å—ä¸­ a å’Œ b æ˜¯å˜é‡:</li>
</ol>
<pre><code class="language-pascal">â€œBEGIN a := 11; b := a + 9 - 5 * 2 ENDâ€ 
</code></pre>
<ol start="7">
<li>
<p>An <em><strong>empty</strong></em> statement represents a grammar rule with no further productions. We use the <em>empty_statement</em> grammar rule to indicate the end of the <em>statement_list</em> in the parser and also to allow for empty compound statements as in â€˜BEGIN ENDâ€™.<br>
ç©ºè¯­å¥è¡¨ç¤ºæ²¡æœ‰è¿›ä¸€æ­¥ç»“æœçš„è¯­æ³•è§„åˆ™ã€‚æˆ‘ä»¬ä½¿ç”¨ empty _ statement è¯­æ³•è§„åˆ™æ¥æŒ‡ç¤ºè¯­æ³•åˆ†æå™¨ä¸­ statement _ list çš„ç»“å°¾ï¼Œå¹¶ä¸”å…è®¸ä½¿ç”¨ç©ºçš„å¤åˆè¯­å¥ï¼Œå¦‚â€˜ BEGIN ENDâ€™ã€‚</p>
</li>
<li>
<p>The <em><strong>factor</strong></em> rule is updated to handleÂ variables.<br>
factorè§„åˆ™è¢«æ›´æ–°ä»¥å¤„ç†å˜é‡ã€‚</p>
</li>
</ol>
<p>Now letâ€™s take a look at our completeÂ grammar:</p>
<p>ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®Œæ•´çš„è¯­æ³•:</p>
<pre><code>    program : compound_statement DOT

    compound_statement : BEGIN statement_list END

    statement_list : statement
                   | statement SEMI statement_list

    statement : compound_statement
              | assignment_statement
              | empty

    assignment_statement : variable ASSIGN expr

    empty :

    expr: term ((PLUS | MINUS) term)*

    term: factor ((MUL | DIV) factor)*

    factor : PLUS factor
           | MINUS factor
           | INTEGER
           | LPAREN expr RPAREN
           | variable

    variable: ID
</code></pre>
<p>You probably noticed that I didnâ€™t use the star <strong>â€˜*â€™</strong> symbol in the <em>compound_statement</em> rule to represent zero or more repetitions, but instead explicitly specified the <em>statement_list</em> rule. This is another way to represent the â€˜zero or moreâ€™ operation, and it will come in handy when we look at parser generators like <a href="http://www.dabeaz.com/ply/">PLY</a>, later in the series. I also split the â€œ(PLUS | MINUS) factorâ€ sub-rule into two separateÂ rules.</p>
<p>æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œåœ¨å¤åˆè¯­å¥è§„åˆ™ä¸­ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨æ˜Ÿå·â€˜ *â€™ç¬¦å·æ¥è¡¨ç¤ºé›¶æ¬¡æˆ–æ›´å¤šæ¬¡çš„é‡å¤ï¼Œè€Œæ˜¯æ˜ç¡®æŒ‡å®šäº†è¯­å¥åˆ—è¡¨è§„åˆ™ã€‚è¿™æ˜¯è¡¨ç¤ºâ€œé›¶æˆ–æ›´å¤šâ€æ“ä½œçš„å¦ä¸€ç§æ–¹æ³•ï¼Œåœ¨æœ¬ç³»åˆ—åé¢çš„æ–‡ç« ä¸­ï¼Œå½“æˆ‘ä»¬ç ”ç©¶åƒ PLY è¿™æ ·çš„è§£æå™¨ç”Ÿæˆå™¨æ—¶ï¼Œå®ƒä¼šæ´¾ä¸Šç”¨åœºã€‚æˆ‘è¿˜å°†(PLUS | MINUS) è¿™ä¸ªfactor å­è§„åˆ™åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„è§„åˆ™ã€‚</p>
<p>In order to support the updated grammar, we need to make a number of changes to our lexer, parser, and interpreter. Letâ€™s go over those changes one byÂ one.</p>
<p>ä¸ºäº†æ”¯æŒæ›´æ–°åçš„è¯­æ³•ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¯æ³•åˆ†æå™¨ã€è¯­æ³•åˆ†æå™¨å’Œè§£é‡Šå™¨è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚è®©æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªåœ°å¤ä¹ ä¸€ä¸‹è¿™äº›å˜åŒ–ã€‚</p>
<p>Here is the summary of the changes in our lexer: <img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_lexer.png" alt="" loading="lazy"></p>
<p>ä¸‹é¢æ˜¯ lexer ä¸­çš„æ›´æ”¹æ‘˜è¦:</p>
<ol>
<li>To support a Pascal programâ€™s definition, compound statements, assignment statements, and variables, our lexer needs to return newÂ tokens:<br>
ä¸ºäº†æ”¯æŒ Pascal ç¨‹åºçš„å®šä¹‰ã€å¤åˆè¯­å¥ã€èµ‹å€¼è¯­å¥å’Œå˜é‡ï¼Œlexer éœ€è¦è¿”å›æ–°çš„token:</li>
</ol>
<ul>
<li>BEGIN (to mark the beginning of a compoundÂ statement)
<ul>
<li>(æ ‡è®°å¤åˆè¯­å¥çš„å¼€å¤´)</li>
</ul>
</li>
<li>END (to mark the end of the compoundÂ statement)
<ul>
<li>(æ ‡è®°å¤åˆè¯­å¥çš„ç»“æŸ)</li>
</ul>
</li>
<li>DOT (a token for a dot character â€˜.â€™ required by a Pascal programâ€™sÂ definition)
<ul>
<li>(Pascal ç¨‹åºå®šä¹‰æ‰€è¦æ±‚çš„ç‚¹å­—ç¬¦â€œ .â€çš„token)</li>
</ul>
</li>
<li>ASSIGN (a token for a two character sequence â€˜:=â€™). In Pascal, an assignment operator is different than in many other languages like C, Python, Java, Rust, or Go, where you would use single character â€˜=â€™ to indicateÂ assignment
<ul>
<li>(ä¸¤ä¸ªå­—ç¬¦åºåˆ—â€˜ : =â€™çš„token)ã€‚åœ¨ Pascal ä¸­ï¼Œèµ‹å€¼æ“ä½œç¬¦ä¸åŒäºè®¸å¤šå…¶ä»–è¯­è¨€ï¼Œå¦‚ cã€ Pythonã€ Javaã€ Rust æˆ– Goï¼Œåœ¨è¿™äº›è¯­è¨€ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å•ä¸ªå­—ç¬¦â€˜ =â€™æ¥è¡¨ç¤ºèµ‹å€¼ã€‚</li>
</ul>
</li>
<li>SEMI (a token for a semicolon character â€˜;â€™ that is used to mark the end of a statement inside a compoundÂ statement)
<ul>
<li>(åˆ†å·å­—ç¬¦â€˜ ;â€™çš„tokenï¼Œç”¨äºæ ‡è®°å¤åˆè¯­å¥ä¸­è¯­å¥çš„ç»“æŸ)</li>
</ul>
</li>
<li>ID (A token for a valid identifier. Identifiers start with an alphabetical character followed by any number of alphanumericalÂ characters)
<ul>
<li>(è¡¨ç¤ºæœ‰æ•ˆæ ‡è¯†ç¬¦çš„tokenã€‚æ ‡è¯†ç¬¦ä»¥å­—æ¯å­—ç¬¦å¼€å¤´ï¼Œåè·Ÿä»»æ„æ•°é‡çš„å­—æ¯æ•°å­—å­—ç¬¦)</li>
</ul>
</li>
</ul>
<ol start="2">
<li>Sometimes, in order to be able to differentiate between different tokens that start with the same character, (â€˜:â€™ vs â€˜:=â€™ or â€˜==â€™ vs â€˜=&gt;â€™ ) we need to peek into the input buffer without actually consuming the next character. For this particular purpose, I introduced a <em>peek</em> method that will help us tokenize assignment statements. The method is not strictly required, but I thought I would introduce it earlier in the series and it will also make the <em>get_next_token</em> method a bit cleaner. All it does is return the next character from the text buffer without incrementing the <em>self.pos</em> variable. Here is the methodÂ itself:<br>
æœ‰æ—¶å€™ï¼Œä¸ºäº†èƒ½å¤ŸåŒºåˆ†ä»¥ç›¸åŒå­—ç¬¦å¼€å¤´çš„ä¸åŒtokenï¼ˆ <code> :</code>vs<code>:=</code> æˆ– <code>= =</code>vs<code>=&gt;</code> ) ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹è¾“å…¥ç¼“å†²åŒºï¼Œè€Œä¸éœ€è¦å®é™…æ¶ˆè€—ä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»‹ç»äº†ä¸€ä¸ª peek æ–¹æ³•ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬å¯¹èµ‹å€¼è¯­å¥tokenizeã€‚è¿™ä¸ªæ–¹æ³•å¹¶ä¸æ˜¯ä¸¥æ ¼è¦æ±‚çš„ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºæˆ‘åº”è¯¥åœ¨æœ¬ç³»åˆ—çš„å‰é¢ä»‹ç»è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒè¿˜å°†ä½¿ get_next _ token æ–¹æ³•æ›´åŠ æ¸…æ™°ã€‚å®ƒæ‰€åšçš„åªæ˜¯ä»æ–‡æœ¬ç¼“å†²åŒºè¿”å›ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸å¢åŠ  self.pos å˜é‡ã€‚è¿™å°±æ˜¯æ–¹æ³•æœ¬èº«:</li>
</ol>
<pre><code class="language-python">def peek(self):
peek_pos = self.pos + 1
if peek_pos &gt; len(self.text) - 1:
    return None
else:
    return self.text[peek_pos]
</code></pre>
<ol start="3">
<li>Because Pascal variables and reserved keywords are both identifiers, we will combine their handling into one method called _<em>id</em>. The way it works is that the lexer consumes a sequence of alphanumerical characters and then checks if the character sequence is a reserved word. If it is, it returns a pre-constructed token for that reserved keyword. And if itâ€™s not a reserved keyword, it returns a new ID token whose value is the character string (lexeme). I bet at this point you think, â€œGosh, just show me the code.â€ ğŸ˜ƒ Here itÂ is:<br>
å› ä¸º Pascal å˜é‡å’Œä¿ç•™å…³é”®å­—éƒ½æ˜¯æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å®ƒä»¬çš„å¤„ç†åˆå¹¶åˆ°ä¸€ä¸ªåä¸º <code>_id</code> çš„æ–¹æ³•ä¸­ã€‚å®ƒçš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œè¯æ³•åˆ†æå™¨â€œæ¶ˆè€—â€ä¸€ä¸ªå­—æ¯æ•°å­—å­—ç¬¦åºåˆ—ï¼Œç„¶åæ£€æŸ¥å­—ç¬¦åºåˆ—æ˜¯å¦æ˜¯ä¿ç•™å­—ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›è¯¥ä¿ç•™å…³é”®å­—çš„é¢„æ„é€ tokenã€‚å¦‚æœå®ƒä¸æ˜¯ä¿ç•™å…³é”®å­—ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„ ID tokenï¼Œå…¶å€¼ä¸ºå­—ç¬¦ä¸²(lexeme)ã€‚æˆ‘æ‰“èµŒæ­¤æ—¶ä½ ä¼šæƒ³ï¼Œâ€œå¤©å“ªï¼Œç»™æˆ‘çœ‹çœ‹ä»£ç å§ã€‚â€:)åœ¨è¿™é‡Œ:</li>
</ol>
<pre><code class="language-python">RESERVED_KEYWORDS = {
'BEGIN': Token('BEGIN', 'BEGIN'),
'END': Token('END', 'END'),
}
def _id(self):
 &quot;&quot;&quot;Handle identifiers and reserved keywords&quot;&quot;&quot;
 result = ''
 while self.current_char is not None and self.current_char.isalnum():
 result += self.current_char
 self.advance()

 token = RESERVED_KEYWORDS.get(result, Token(ID, result))
 return token
</code></pre>
<ol start="4">
<li>And now letâ€™s take a look at the changes in the main lexer method <em>get_next_token</em>:<br>
ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹ lexer æ–¹æ³• get _ next _ token ä¸­çš„æ›´æ”¹:</li>
</ol>
<pre><code class="language-python">def get_next_token(self):
    while self.current_char is not None:
        ...
        if self.current_char.isalpha():
            return self._id()

        if self.current_char == ':' and self.peek() == '=':
            self.advance()
            self.advance()
            return Token(ASSIGN, ':=')

        if self.current_char == ';':
            self.advance()
            return Token(SEMI, ';')

        if self.current_char == '.':
            self.advance()
            return Token(DOT, '.')
        ...
</code></pre>
<p>Itâ€™s time to see our shiny new lexer in all its glory and action. Download the source code from <a href="https://github.com/rspivak/lsbasi/blob/master/part9/python">GitHub</a> and launch your Python shell from the same directory where you saved the <a href="https://github.com/rspivak/lsbasi/blob/master/part9/python/spi.py">spi.py</a> file:</p>
<p>ç°åœ¨æ˜¯æ—¶å€™çœ‹çœ‹æˆ‘ä»¬æ–°çš„ lexer ã€‚ä» GitHub ä¸‹è½½æºä»£ç ï¼Œç„¶åä»ä¿å­˜ spi.py æ–‡ä»¶çš„åŒä¸€ä¸ªç›®å½•å¯åŠ¨ Python shell:</p>
<pre><code class="language-python">&gt;&gt;&gt; from spi import Lexer
&gt;&gt;&gt; lexer = Lexer('BEGIN a := 2; END.')
&gt;&gt;&gt; lexer.get_next_token()
Token(BEGIN, 'BEGIN')
&gt;&gt;&gt; lexer.get_next_token()
Token(ID, 'a')
&gt;&gt;&gt; lexer.get_next_token()
Token(ASSIGN, ':=')
&gt;&gt;&gt; lexer.get_next_token()
Token(INTEGER, 2)
&gt;&gt;&gt; lexer.get_next_token()
Token(SEMI, ';')
&gt;&gt;&gt; lexer.get_next_token()
Token(END, 'END')
&gt;&gt;&gt; lexer.get_next_token()
Token(DOT, '.')
&gt;&gt;&gt; lexer.get_next_token()
Token(EOF, None)
&gt;&gt;&gt;
</code></pre>
<p>Moving on to parserÂ changes.</p>
<p>ç»§ç»­æ›´æ”¹è§£æå™¨ã€‚</p>
<p>Here is the summary of changes in our parser: <img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_parser.png" alt="" loading="lazy"></p>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬è§£æå™¨ä¸­çš„å˜åŒ–æ€»ç»“:</p>
<ol>
<li>Letâ€™s start with new ASTÂ nodes:<br>
è®©æˆ‘ä»¬ä»æ–°çš„ AST èŠ‚ç‚¹å¼€å§‹:</li>
</ol>
<ul>
<li>
<p><em>Compound</em> AST node represents a compound statement. It contains a list of statement nodes in its <em>children</em> variable.<br>
<em>Compound</em> AST èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå¤åˆè¯­å¥ï¼Œå®ƒçš„å­å˜é‡ä¸­åŒ…å«ä¸€ä¸ªè¯­å¥èŠ‚ç‚¹åˆ—è¡¨ã€‚</p>
<pre><code class="language-python">class Compound(AST):
&quot;&quot;&quot;Represents a 'BEGIN ... END' block&quot;&quot;&quot;
def __init__(self):
 self.children = []
</code></pre>
</li>
<li>
<p><em>Assign</em> AST node represents an assignment statement. Its <em>left</em> variable is for storing a <em>Var</em> node and its <em>right</em> variable is for storing a node returned by the expr parserÂ method:<br>
<em>Assign</em> AST èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªèµ‹å€¼è¯­å¥ã€‚å®ƒçš„å·¦å˜é‡ç”¨äºå­˜å‚¨ Var èŠ‚ç‚¹ï¼Œå³å˜é‡ç”¨äºå­˜å‚¨ expr è§£ææ–¹æ³•è¿”å›çš„èŠ‚ç‚¹:</p>
<pre><code class="language-python">class Assign(AST):
def __init__(self, left, op, right):
 self.left = left
 self.token = self.op = op
 self.right = right
</code></pre>
</li>
<li>
<p><em>Var</em> AST node (you guessed it) represents a variable. The <em>self.value</em> holds the variableâ€™sÂ name.<br>
Var AST èŠ‚ç‚¹(æ‚¨çŒœå¯¹äº†)è¡¨ç¤ºä¸€ä¸ªå˜é‡ã€‚</p>
<pre><code class="language-python">class Var(AST):
&quot;&quot;&quot;The Var node is constructed out of ID token.&quot;&quot;&quot;
def __init__(self, token):
 self.token = token
 self.value = token.value
</code></pre>
</li>
<li>
<p><em>NoOp</em> node is used to represent an <em>empty</em> statement. For example â€˜BEGIN ENDâ€™ is a valid compound statement that has noÂ statements.<br>
NoOp èŠ‚ç‚¹ç”¨äºè¡¨ç¤ºä¸€ä¸ªç©ºè¯­å¥ã€‚ä¾‹å¦‚ï¼ŒBEGIN END æ˜¯ä¸€ä¸ªæ²¡æœ‰è¯­å¥çš„æœ‰æ•ˆå¤åˆè¯­å¥ã€‚</p>
</li>
</ul>
<ol start="2">
<li>As you remember, each rule from the grammar has a corresponding method in our recursive-descent parser. This time weâ€™re adding seven new methods. These methods are responsible for parsing new language constructs and constructing new AST nodes. They are prettyÂ straightforward:<br>
æ­£å¦‚æ‚¨æ‰€è®°å¾—çš„ï¼Œæ–‡æ³•ä¸­çš„æ¯ä¸ªè§„åˆ™åœ¨æˆ‘ä»¬çš„é€’å½’ä¸‹é™åˆ†æå™¨ä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æ–¹æ³•ã€‚è¿™æ¬¡æˆ‘ä»¬å¢åŠ äº†ä¸ƒç§æ–°æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•è´Ÿè´£è§£ææ–°çš„è¯­è¨€ç»“æ„å¹¶æ„é€ æ–°çš„ AST èŠ‚ç‚¹ã€‚å®ƒä»¬éå¸¸ç›´æˆªäº†å½“:</li>
</ol>
<pre><code class="language-python">def program(self):
  &quot;&quot;&quot;program : compound_statement DOT&quot;&quot;&quot;
  node = self.compound_statement()
  self.eat(DOT)
  return node

def compound_statement(self):
  &quot;&quot;&quot;
  compound_statement: BEGIN statement_list END
  &quot;&quot;&quot;
  self.eat(BEGIN)
  nodes = self.statement_list()
  self.eat(END)

  root = Compound()
  for node in nodes:
      root.children.append(node)

  return root

def statement_list(self):
  &quot;&quot;&quot;
  statement_list : statement
                 | statement SEMI statement_list
  &quot;&quot;&quot;
  node = self.statement()

  results = [node]

  while self.current_token.type == SEMI:
      self.eat(SEMI)
      results.append(self.statement())

  if self.current_token.type == ID:
      self.error()

  return results

def statement(self):
  &quot;&quot;&quot;
  statement : compound_statement
            | assignment_statement
            | empty
  &quot;&quot;&quot;
  if self.current_token.type == BEGIN:
      node = self.compound_statement()
  elif self.current_token.type == ID:
      node = self.assignment_statement()
  else:
      node = self.empty()
  return node

def assignment_statement(self):
  &quot;&quot;&quot;
  assignment_statement : variable ASSIGN expr
  &quot;&quot;&quot;
  left = self.variable()
  token = self.current_token
  self.eat(ASSIGN)
  right = self.expr()
  node = Assign(left, token, right)
  return node

def variable(self):
  &quot;&quot;&quot;
  variable : ID
  &quot;&quot;&quot;
  node = Var(self.current_token)
  self.eat(ID)
  return node

def empty(self):
  &quot;&quot;&quot;An empty production&quot;&quot;&quot;
  return NoOp()
</code></pre>
<ol start="3">
<li>We also need to update the existing <em>factor</em> method to parseÂ variables:<br>
æˆ‘ä»¬è¿˜éœ€è¦æ›´æ–°ç°æœ‰çš„ factor æ–¹æ³•æ¥è§£æå˜é‡:</li>
</ol>
<pre><code class="language-python">def factor(self):
    &quot;&quot;&quot;factor : PLUS  factor
              | MINUS factor
              | INTEGER
              | LPAREN expr RPAREN
              | variable
    &quot;&quot;&quot;
    token = self.current_token
    if token.type == PLUS:
        self.eat(PLUS)
        node = UnaryOp(token, self.factor())
        return node
    ...
    else:
        node = self.variable()
        return node
</code></pre>
<ol start="4">
<li>The parserâ€™s <em>parse</em> method is updated to start the parsing process by parsing a programÂ definition:<br>
è§£æå™¨çš„ parse æ–¹æ³•é€šè¿‡è§£æç¨‹åºå®šä¹‰æ¥æ›´æ–°å¼€å§‹è§£æè¿‡ç¨‹:</li>
</ol>
<pre><code class="language-python">def parse(self):
    node = self.program()
    if self.current_token.type != EOF:
        self.error()

    return node
</code></pre>
<p>Here is our sample programÂ again:</p>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ç¤ºä¾‹ç¨‹åº:</p>
<pre><code class="language-pascal">BEGIN
    BEGIN
        number := 2;
        a := number;
        b := 10 * a + 10 * number / 4;
        c := a - - b
    END;
    x := 11;
END.
</code></pre>
<p>Letâ€™s visualize it with <a href="https://github.com/rspivak/lsbasi/blob/master/part9/python/genastdot.py">genastdot.py</a> (For brevity, when displaying a <em>Var</em> node, it just shows the nodeâ€™s variable name and when displaying an Assign node it shows â€˜:=â€™ instead of showing â€˜Assignâ€™Â text):</p>
<p>è®©æˆ‘ä»¬ä½¿ç”¨ genastdot.py å°†å…¶å¯è§†åŒ–(ä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œåœ¨æ˜¾ç¤º Var èŠ‚ç‚¹æ—¶ï¼Œå®ƒåªæ˜¾ç¤ºèŠ‚ç‚¹çš„å˜é‡åï¼Œè€Œåœ¨æ˜¾ç¤º Assign èŠ‚ç‚¹æ—¶ï¼Œå®ƒæ˜¾ç¤ºâ€˜ : =â€™è€Œä¸æ˜¾ç¤ºâ€˜ Assignâ€™æ–‡æœ¬) :</p>
<pre><code class="language-shell">$ python genastdot.py assignments.txt &gt; ast.dot &amp;&amp; dot -Tpng -o ast.png ast.dot
</code></pre>
<p>â€‹</p>
<figure data-type="image" tabindex="4"><img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_full_ast.png" alt="" loading="lazy"></figure>
<p>And finally, here are the required interpreter changes: <img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_interpreter.png" alt="" loading="lazy"></p>
<p>æœ€åï¼Œä»¥ä¸‹æ˜¯æ‰€éœ€çš„è§£é‡Šå™¨æ›´æ”¹:</p>
<p>To interpret new AST nodes, we need to add corresponding visitor methods to the interpreter. There are four new visitorÂ methods:</p>
<p>è¦è§£é‡Šæ–°çš„ AST èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å‘è§£é‡Šå™¨æ·»åŠ ç›¸åº”çš„visitoræ–¹æ³•ã€‚æœ‰å››ç§æ–°çš„è®¿é—®æ–¹æ³•:</p>
<ul>
<li>visit_Compound</li>
<li>visit_Assign</li>
<li>visit_Var</li>
<li>visit_NoOp</li>
</ul>
<p><em>Compound</em> and <em>NoOp</em> visitor methods are pretty straightforward. The <em>visit_Compound</em> method iterates over its children and visits each one in turn, and the <em>visit_NoOp</em> method doesÂ nothing.</p>
<p>Compound å’Œ NoOp è®¿é—®è€…æ–¹æ³•éå¸¸ç®€å•ã€‚ _visit_Compound _æ–¹æ³•è¿­ä»£å®ƒçš„å­å…ƒç´ å¹¶ä¾æ¬¡è®¿é—®æ¯ä¸ªå­å…ƒç´ ï¼Œè€Œ_visit_NoOp_æ–¹æ³•ä»€ä¹ˆä¹Ÿä¸åšã€‚</p>
<pre><code class="language-python">def visit_Compound(self, node):
    for child in node.children:
        self.visit(child)

def visit_NoOp(self, node):
    pass
</code></pre>
<p>The <em>Assign</em> and <em>Var</em> visitor methods deserve a closerÂ examination.</p>
<p>Assign å’Œ Var visitor æ–¹æ³•å€¼å¾—è¿›ä¸€æ­¥ç ”ç©¶ã€‚</p>
<p>When we assign a value to a variable, we need to store that value somewhere for when we need it later, and thatâ€™s exactly what the <em>visit_Assign</em> methodÂ does:</p>
<p>å½“æˆ‘ä»¬ä¸ºä¸€ä¸ªå˜é‡èµ‹å€¼æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªå€¼å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ï¼Œä»¥å¤‡ä»¥åéœ€è¦æ—¶ä½¿ç”¨ï¼Œè€Œè¿™æ­£æ˜¯ visit _ assign æ–¹æ³•æ‰€åšçš„:</p>
<pre><code class="language-python">def visit_Assign(self, node):
    var_name = node.left.value
    self.GLOBAL_SCOPE[var_name] = self.visit(node.right)
</code></pre>
<p>The method stores a key-value pair (a variable name and a value associated with the variable) in a <em>symbol table</em> GLOBAL_SCOPE. What is a <em>symbol table</em>? A <em><strong>symbol table</strong></em> is an abstract data type (<strong>ADT</strong>) for tracking various symbols in source code. The only symbol category we have right now is variables and we use the Python dictionary to implement the symbol table ADT. For now Iâ€™ll just say that the way the symbol table is used in this article is pretty â€œhackyâ€: itâ€™s not a separate class with special methods but a simple Python dictionary and it also does double duty as a memory space. In future articles, I will be talking about symbol tables in much greater detail, and together weâ€™ll also remove all theÂ hacks.</p>
<p>è¯¥æ–¹æ³•åœ¨ç¬¦å·è¡¨ global_scope ä¸­å­˜å‚¨é”®å€¼å¯¹(å˜é‡åå’Œä¸å˜é‡å…³è”çš„å€¼)ã€‚ä»€ä¹ˆæ˜¯ç¬¦å·è¡¨ï¼Ÿç¬¦å·è¡¨æ˜¯ç”¨äºè·Ÿè¸ªæºä»£ç ä¸­å„ç§ç¬¦å·çš„æŠ½è±¡æ•°æ®ç±»å‹(ADT)ã€‚æˆ‘ä»¬ç°åœ¨å”¯ä¸€çš„ç¬¦å·ç±»åˆ«æ˜¯å˜é‡ï¼Œæˆ‘ä»¬ä½¿ç”¨ Python å­—å…¸æ¥å®ç°ç¬¦å·è¡¨ ADTã€‚ç°åœ¨æˆ‘åªæƒ³è¯´ï¼Œæœ¬æ–‡ä¸­ä½¿ç”¨ç¬¦å·è¡¨çš„æ–¹å¼éå¸¸â€œæœ´ç´ â€: å®ƒä¸æ˜¯ä¸€ä¸ªå¸¦æœ‰ç‰¹æ®Šæ–¹æ³•çš„å•ç‹¬ç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªç®€å•çš„ Python å­—å…¸ï¼Œå®ƒè¿˜å…¼æœ‰ä½œä¸ºå†…å­˜ç©ºé—´çš„åŒé‡ä»»åŠ¡ã€‚åœ¨ä»¥åçš„æ–‡ç« ä¸­ï¼Œæˆ‘å°†æ›´è¯¦ç»†åœ°è®¨è®ºç¬¦å·è¡¨ï¼Œæˆ‘ä»¬è¿˜å°†ä¸€èµ·åˆ é™¤æ‰€æœ‰çš„hacksã€‚</p>
<p>Letâ€™s take a look at an AST for the statement â€œa := 3;â€ and the symbol table before and after the <em>visit_Assign</em> method does itsÂ job:</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¯­å¥â€œ a: = 3;â€çš„ ASTï¼Œå¹¶ä¸”åœ¨ visit _ assign æ–¹æ³•ä¹‹å‰å’Œä¹‹åçš„ç¬¦å·è¡¨å®Œæˆäº†å®ƒçš„å·¥ä½œ:</p>
<figure data-type="image" tabindex="5"><img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_ast_st01.png" alt="" loading="lazy"></figure>
<p>Now letâ€™s take a look at an AST for the statement â€œb := a +Â 7;â€</p>
<p>ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¯­å¥â€œ b: = a + 7;â€çš„ AST</p>
<figure data-type="image" tabindex="6"><img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_ast_only_st02.png" alt="" loading="lazy"></figure>
<p>As you can see, the right-hand side of the assignment statement - â€œa + 7â€ - references the variable â€˜aâ€™, so before we can evaluate the expression â€œa + 7â€ we need to find out what the value of â€˜aâ€™ is and thatâ€™s the responsibility of the <em>visit_Var</em>Â method:</p>
<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œèµ‹å€¼è¯­å¥çš„å³è¾¹â€”â€”â€œ a + 7â€â€”â€”å¼•ç”¨äº†å˜é‡â€œ aâ€ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬è®¡ç®—è¡¨è¾¾å¼â€œ a + 7â€ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºâ€œ aâ€çš„å€¼ï¼Œè¿™æ˜¯ visit _ var æ–¹æ³•çš„èŒè´£:</p>
<pre><code class="language-python">def visit_Var(self, node):
    var_name = node.value
    val = self.GLOBAL_SCOPE.get(var_name)
    if val is None:
        raise NameError(repr(var_name))
    else:
        return val
</code></pre>
<p>When the method visits a <em>Var</em> node as in the above AST picture, it first gets the variableâ€™s name and then uses that name as a key into the <em>GLOBAL_SCOPE</em> dictionary to get the variableâ€™s value. If it can find the value, it returns it, if not - it raises a <em>NameError</em> exception. Here are the contents of the symbol table before evaluating the assignment statement â€œb := a +Â 7;â€:</p>
<p>å½“è¯¥æ–¹æ³•è®¿é—®ä¸Šé¢ AST å›¾ç‰‡ä¸­çš„ Var èŠ‚ç‚¹æ—¶ï¼Œå®ƒé¦–å…ˆè·å–å˜é‡çš„åç§°ï¼Œç„¶åä½¿ç”¨è¯¥åç§°ä½œä¸º GLOBAL _ scope å­—å…¸ä¸­çš„é”®æ¥è·å–å˜é‡çš„å€¼ã€‚å¦‚æœå®ƒèƒ½æ‰¾åˆ°è¯¥å€¼ï¼Œåˆ™è¿”å›è¯¥å€¼ï¼Œå¦‚æœä¸èƒ½ï¼Œåˆ™å¼•å‘ NameError å¼‚å¸¸ã€‚ä¸‹é¢æ˜¯åœ¨è®¡ç®—èµ‹å€¼è¯­å¥â€œ b: = a + 7;â€ä¹‹å‰çš„ç¬¦å·è¡¨çš„å†…å®¹:</p>
<figure data-type="image" tabindex="7"><img src="https://ruslanspivak.com/lsbasi-part11/lsbasi_part9_ast_st02.png" alt="" loading="lazy"></figure>
<p>These are all the changes that we need to do today to make our interpreter tick. At the end of the main program, we simply print the contents of the symbol table GLOBAL_SCOPE to standardÂ output.</p>
<p>è¿™äº›å°±æ˜¯æˆ‘ä»¬ä»Šå¤©éœ€è¦åšçš„æ‰€æœ‰æ”¹å˜ï¼Œä»¥ä½¿æˆ‘ä»¬çš„è§£é‡Šå™¨å·¥ä½œèµ·æ¥ã€‚åœ¨ä¸»ç¨‹åºçš„æœ€åï¼Œæˆ‘ä»¬ç®€å•åœ°å°†ç¬¦å·è¡¨ GLOBAL _ scope çš„å†…å®¹æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚</p>
<p>Letâ€™s take our updated interpreter for a drive both from a Python interactive shell and from the command line. Make sure that you downloaded both the source code for the interpreter and the <a href="https://github.com/rspivak/lsbasi/blob/master/part9/python/assignments.txt">assignments.txt</a> file beforeÂ testing:</p>
<p>è®©æˆ‘ä»¬ä» Python äº¤äº’å¼ shell å’Œå‘½ä»¤è¡Œè·å–å·²æ›´æ–°çš„è§£é‡Šå™¨é©±åŠ¨å™¨ã€‚åœ¨æµ‹è¯•ä¹‹å‰ï¼Œç¡®ä¿ä½ ä¸‹è½½äº†è§£é‡Šå™¨çš„æºä»£ç å’Œ assignments.txt æ–‡ä»¶:</p>
<p>Launch your PythonÂ shell:</p>
<p>å¯åŠ¨ä½ çš„ Python shell:</p>
<pre><code class="language-shell">$ python
&gt;&gt;&gt; from spi import Lexer, Parser, Interpreter
&gt;&gt;&gt; text = &quot;&quot;&quot;\
... BEGIN
...
...     BEGIN
...         number := 2;
...         a := number;
...         b := 10 * a + 10 * number / 4;
...         c := a - - b
...     END;
...
...     x := 11;
... END.
... &quot;&quot;&quot;
&gt;&gt;&gt; lexer = Lexer(text)
&gt;&gt;&gt; parser = Parser(lexer)
&gt;&gt;&gt; interpreter = Interpreter(parser)
&gt;&gt;&gt; interpreter.interpret()
&gt;&gt;&gt; print(interpreter.GLOBAL_SCOPE)
{'a': 2, 'x': 11, 'c': 27, 'b': 25, 'number': 2}
</code></pre>
<p>And from the command line, using a source file as input to ourÂ interpreter:</p>
<p>åœ¨å‘½ä»¤è¡Œä¸­ï¼Œä½¿ç”¨æºæ–‡ä»¶ä½œä¸ºè§£é‡Šå™¨çš„è¾“å…¥:</p>
<pre><code class="language-shell">$ python spi.py assignments.txt
{'a': 2, 'x': 11, 'c': 27, 'b': 25, 'number': 2}
</code></pre>
<p>If you havenâ€™t tried it yet, try it now and see for yourself that the interpreter is doing its jobÂ properly.</p>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰å°è¯•è¿‡ï¼Œé‚£ä¹ˆç°åœ¨å°±è¯•ä¸€è¯•ï¼Œçœ‹çœ‹è¯‘å‘˜æ˜¯å¦æ­£ç¡®åœ°å®Œæˆäº†å®ƒçš„å·¥ä½œã€‚</p>
<p>Letâ€™s sum up what you had to do to extend the Pascal interpreter in thisÂ article:</p>
<p>è®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹åœ¨æœ¬æ–‡ä¸­æ‰©å±• Pascal è§£é‡Šå™¨æ‰€åšçš„å·¥ä½œ:</p>
<ol>
<li>Add new rules to theÂ grammar</li>
<li>åœ¨grammarä¸­æ·»åŠ æ–°è§„åˆ™</li>
<li>Add new tokens and supporting methods to the lexer and update the _get_next_token _method</li>
<li>å‘ lexer æ·»åŠ æ–°çš„tokenå’Œæ”¯æŒæ–¹æ³•ï¼Œå¹¶æ›´æ–°_get_next_token_æ–¹æ³•</li>
<li>Add new nodes to the parser for new languageÂ constructs ä¸ºæ–°è¯­è¨€ç»“æ„æ·»åŠ æ–°çš„nodeåˆ°è§£æå™¨</li>
<li>Add new methods corresponding to the new grammar rules to our recursive-descent parser and update any existing methods, if necessary (<em>factor</em> method, Iâ€™m looking at you. ğŸ˜ƒ</li>
<li>å‘é€’å½’ä¸‹é™è§£æå™¨ä¸­æ·»åŠ ä¸æ–°è¯­æ³•è§„åˆ™å¯¹åº”çš„æ–°æ–¹æ³•ï¼Œå¹¶åœ¨å¿…è¦æ—¶æ›´æ–°ä»»ä½•ç°æœ‰æ–¹æ³•</li>
<li>Add new visitor methods to theÂ interpreter å‘è§£é‡Šå™¨æ·»åŠ æ–°çš„visitoræ–¹æ³•</li>
<li>Add a dictionary for storing variables and for looking themÂ up æ·»åŠ ä¸€ä¸ªç”¨äºå­˜å‚¨å˜é‡å’ŒæŸ¥æ‰¾å˜é‡çš„å­—å…¸</li>
</ol>
<p>In this part I had to introduce a number of â€œhacksâ€ that weâ€™ll remove as we move forward with theÂ series:</p>
<p>åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘å¿…é¡»ä»‹ç»ä¸€äº›â€œ hacksâ€ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç³»åˆ—åç»­æ–‡ç« ä¸­åˆ é™¤å®ƒä»¬:</p>
<figure data-type="image" tabindex="8"><img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_hacks.png" alt="" loading="lazy"></figure>
<ol>
<li>The _program _grammar rule is incomplete. Weâ€™ll extend it later with additionalÂ elements.</li>
<li>programçš„è¯­æ³•è§„åˆ™æ˜¯ä¸å®Œæ•´çš„ã€‚æˆ‘ä»¬ç¨åå°†ä½¿ç”¨å…¶ä»–å…ƒç´ å¯¹å…¶è¿›è¡Œæ‰©å±•</li>
<li>Pascal is a statically typed language, and you must declare a variable and its type before using it. But, as you saw, that was not the case in thisÂ article.</li>
<li>Pascal æ˜¯ä¸€ç§é™æ€ç±»å‹è¯­è¨€ï¼Œåœ¨ä½¿ç”¨å®ƒä¹‹å‰å¿…é¡»å£°æ˜å˜é‡åŠå…¶ç±»å‹ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯è¿™æ ·çš„</li>
<li>No type checking so far. Itâ€™s not a big deal at this point, but I just wanted to mention it explicitly. Once we add more types to our interpreter weâ€™ll need to report an error when you try to add a string and an integer, forÂ example.</li>
<li>åˆ°ç›®å‰ä¸ºæ­¢è¿˜æ²¡æœ‰ç±»å‹æ£€æŸ¥ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä½†æˆ‘åªæ˜¯æƒ³æ˜ç¡®åœ°æä¸€ä¸‹ã€‚ä¸€æ—¦æˆ‘ä»¬å‘è§£é‡Šå™¨æ·»åŠ äº†æ›´å¤šçš„ç±»å‹ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨å°è¯•æ·»åŠ å­—ç¬¦ä¸²å’Œæ•´æ•°æ—¶æŠ¥å‘Šä¸€ä¸ªé”™è¯¯</li>
<li>A symbol table in this part is a simple Python dictionary that does double duty as a memory space. Worry not: symbol tables are such an important topic that Iâ€™ll have several articles dedicated just to them. And memory space (runtime management) is a topic of itsÂ own.</li>
<li>æœ¬éƒ¨åˆ†ä¸­çš„ç¬¦å·è¡¨æ˜¯ä¸€ä¸ªç®€å•çš„ Python å­—å…¸ï¼Œå®ƒå…¼æœ‰å†…å­˜ç©ºé—´çš„åŒé‡ä»»åŠ¡ã€‚ä¸ç”¨æ‹…å¿ƒ: ç¬¦å·è¡¨æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ä¸»é¢˜ï¼Œæˆ‘å°†ä¸“é—¨ä¸ºå®ƒä»¬å†™å‡ ç¯‡æ–‡ç« ã€‚å†…å­˜ç©ºé—´(è¿è¡Œæ—¶ç®¡ç†)æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¯é¢˜</li>
<li>In our simple calculator from previous articles, we used a forward slash character â€˜/â€™ for denoting integer division. In Pascal, though, you have to use a keyword _div _ to specify integer division (See ExerciseÂ 1).</li>
<li>åœ¨å‰é¢æ–‡ç« ä¸­çš„ç®€å•è®¡ç®—å™¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ–œæ å­—ç¬¦â€˜/â€™æ¥è¡¨ç¤ºæ•´æ•°é™¤æ³•ã€‚ä½†åœ¨ Pascal è¯­è¨€ä¸­ï¼Œä½ å¿…é¡»ä½¿ç”¨å…³é”®è¯ div æ¥æŒ‡å®šæ•´æ•°é™¤æ³•(è¯·å‚é˜…ç»ƒä¹ 1)ã€‚</li>
<li>There is also one hack that I introduced on purpose so that you could fix it in Exercise 2: in Pascal all reserved keywords and identifiers are case insensitive, but the interpreter in this article treats them as caseÂ sensitive.</li>
<li>æˆ‘è¿˜æ•…æ„ä»‹ç»äº†ä¸€ä¸ªhackï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨ç»ƒä¹ 2ä¸­ä¿®æ­£å®ƒ: åœ¨ Pascal è¯­è¨€ä¸­ï¼Œæ‰€æœ‰ä¿ç•™çš„å…³é”®å­—å’Œæ ‡è¯†ç¬¦éƒ½ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†æ˜¯æœ¬æ–‡ä¸­çš„è§£é‡Šå™¨å°†å®ƒä»¬è§†ä¸ºåŒºåˆ†å¤§å°å†™</li>
</ol>
<p>To keep you fit, here are new exercises forÂ you:<br>
ç»ƒä¹ ï¼š</p>
<figure data-type="image" tabindex="9"><img src="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_exercises.png" alt="" loading="lazy"></figure>
<ol>
<li>
<p>Pascal variables and reserved keywords are case insensitive, unlike in many other programming languages, so <em>BEGIN</em>, <em>begin</em>, and <em>BeGin</em> they all refer to the same reserved keyword. Update the interpreter so that variables and reserved keywords are case insensitive. Use the following program to testÂ it:</p>
</li>
<li>
<p>ä¸è®¸å¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒï¼ŒPascal å˜é‡å’Œä¿ç•™å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤ BEGINã€ BEGIN å’Œ BEGIN éƒ½å¼•ç”¨åŒä¸€ä¸ªä¿ç•™å…³é”®å­—ã€‚æ›´æ–°è§£é‡Šå™¨ï¼Œä½¿å˜é‡å’Œä¿ç•™å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™ã€‚ä½¿ç”¨ä»¥ä¸‹ç¨‹åºè¿›è¡Œæµ‹è¯•:</p>
</li>
</ol>
<pre><code class="language-pascal">BEGIN
    BEGIN
        number := 2;
        a := NumBer;
        B := 10 * a + 10 * NUMBER / 4;
        c := a - - b
    end;

    x := 11;
END.
</code></pre>
<ol start="2">
<li>
<p>I mentioned in the â€œhacksâ€ section before that our interpreter is using the forward slash character â€˜/â€™ to denote integer division, but instead it should be using Pascalâ€™s reserved keyword <em>div</em> for integer division. Update the interpreter to use the <em>div</em> keyword for integer division, thus eliminating one of theÂ hacks.</p>
</li>
<li>
<p>æˆ‘åœ¨å‰é¢çš„â€œ hacksâ€éƒ¨åˆ†æåˆ°è¿‡ï¼Œæˆ‘ä»¬çš„è§£é‡Šå™¨ä½¿ç”¨æ­£æ–œæ å­—ç¬¦â€˜/â€™æ¥è¡¨ç¤ºæ•´æ•°é™¤æ³•ï¼Œä½†æ˜¯å®ƒåº”è¯¥ä½¿ç”¨ Pascal çš„ä¿ç•™å…³é”®å­— div æ¥è¡¨ç¤ºæ•´æ•°é™¤æ³•ã€‚æ›´æ–°è§£é‡Šå™¨ï¼Œä½¿å…¶ä½¿ç”¨ div å…³é”®å­—è¿›è¡Œæ•´æ•°é™¤æ³•ï¼Œä»è€Œæ¶ˆé™¤ä¸€ä¸ª hacksã€‚</p>
</li>
</ol>
<p>â€‹</p>
<ol start="3">
<li>Update the interpreter so that variables could also start with an underscore as in â€˜_num :=Â 5â€™.<br>
æ›´æ–°è§£é‡Šå™¨ï¼Œä½¿å¾—å˜é‡ä¹Ÿå¯ä»¥ä»¥<code>_num :=Â 5</code>ä¸­çš„ä¸‹åˆ’çº¿å¼€å¤´ã€‚</li>
</ol>
<p>Thatâ€™s all for today. Stay tuned and see youÂ soon.</p>
<p>ä»Šå¤©å°±åˆ°è¿™é‡Œï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
<p>Here is a list of books I recommend that will help you in your study of interpreters andÂ compilers:</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘æ¨èçš„ä¸€äº›ä¹¦ç±ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©ä½ å­¦ä¹ è§£é‡Šå™¨å’Œç¼–è¯‘å™¨:</p>
<ol>
<li><a href="http://www.amazon.com/gp/product/193435645X/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=193435645X&amp;linkCode=as2&amp;tag=russblo0b-20&amp;linkId=MP4DCXDV6DJMEJBL">Language Implementation Patterns: Create Your Own Domain-Specific and General Programming Languages (Pragmatic Programmers)</a><br>
è¯­è¨€å®ç°æ¨¡å¼: åˆ›å»ºæ‚¨è‡ªå·±çš„ç‰¹å®šé¢†åŸŸå’Œé€šç”¨ç¼–ç¨‹è¯­è¨€(å®ç”¨ç¨‹åºå‘˜)</li>
<li><a href="http://www.amazon.com/gp/product/0321486811/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0321486811&amp;linkCode=as2&amp;tag=russblo0b-20&amp;linkId=GOEGDQG4HIHU56FQ">Compilers: Principles, Techniques, and Tools (2nd Edition)</a><br>
ç¼–è¯‘å™¨: åŸç†ã€æŠ€æœ¯å’Œå·¥å…·(ç¬¬äºŒç‰ˆ)</li>
</ol>
<p>If you want to get my newest articles in your inbox, then enter your email address below and click &quot;Get Updates!&quot;</p>
<p>å¦‚æœä½ æƒ³å¾—åˆ°æˆ‘çš„æœ€æ–°æ–‡ç« åœ¨æ‚¨çš„æ”¶ä»¶ç®±ï¼Œç„¶åè¾“å…¥æ‚¨çš„ç”µå­é‚®ä»¶åœ°å€ä¸‹é¢ï¼Œå¹¶ç‚¹å‡»â€œè·å–æ›´æ–°!â€</p>
<p><strong>All articles in this series:</strong></p>
<p>æœ¬ç³»åˆ—çš„æ‰€æœ‰æ–‡ç« :</p>
<ul>
<li><a href="https://ruslanspivak.com/lsbasi-part1/">Let's Build A Simple Interpreter. Part 1. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part2/">Let's Build A Simple Interpreter. Part 2. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part3/">Let's Build A Simple Interpreter. Part 3. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part4/">Let's Build A Simple Interpreter. Part 4. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part5/">Let's Build A Simple Interpreter. Part 5. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part6/">Let's Build A Simple Interpreter. Part 6. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part7/">Let's Build A Simple Interpreter. Part 7: Abstract Syntax Trees è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨ã€‚ç¬¬7éƒ¨åˆ†: æŠ½è±¡è¯­æ³•æ ‘</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part8/">Let's Build A Simple Interpreter. Part 8. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part9/">Let's Build A Simple Interpreter. Part 9. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part10/">Let's Build A Simple Interpreter. Part 10. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part11/">Let's Build A Simple Interpreter. Part 11. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part12/">Let's Build A Simple Interpreter. Part 12. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part13/">Let's Build A Simple Interpreter. Part 13: Semantic Analysis è®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨ã€‚ç¬¬13éƒ¨åˆ†: è¯­ä¹‰åˆ†æ</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part14/">Let's Build A Simple Interpreter. Part 14: Nested Scopes and a Source-to-Source Compiler è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨ã€‚ç¬¬14éƒ¨åˆ†: åµŒå¥—ä½œç”¨åŸŸå’Œæºåˆ°æºç¼–è¯‘å™¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part15/">Let's Build A Simple Interpreter. Part 15. è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨ã€‚ç¬¬15éƒ¨åˆ†</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part16/">Let's Build A Simple Interpreter. Part 16: Recognizing Procedure Calls è®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨ã€‚ç¬¬16éƒ¨åˆ†: è¯†åˆ«è¿‡ç¨‹è°ƒç”¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part17/">Let's Build A Simple Interpreter. Part 17: Call Stack and Activation Records è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨ã€‚ç¬¬17éƒ¨åˆ†: è°ƒç”¨å †æ ˆå’Œæ¿€æ´»è®°å½•</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part18/">Let's Build A Simple Interpreter. Part 18: Executing Procedure Calls è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨ã€‚ç¬¬18éƒ¨åˆ†: æ‰§è¡Œè¿‡ç¨‹è°ƒç”¨</a></li>
<li><a href="https://ruslanspivak.com/lsbasi-part19/">Let's Build A Simple Interpreter. Part 19: Nested Procedure Calls è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è§£é‡Šå™¨ã€‚ç¬¬19éƒ¨åˆ†: åµŒå¥—è¿‡ç¨‹è°ƒç”¨</a></li>
</ul>

                        </div>
                        
                            <div class="post-toc">
                                
                            </div>
                            
                                
                                    
                                            <!--zh-->
                                            <section class="post-copyright zh">
                                                <p class="copyright-item ">
                                                    <span>&#x4F5C;&#x8005;:</span>
                                                    <span>ztree</span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x6C38;&#x4E45;&#x94FE;&#x63A5;:</span>
                                                    <span><a href="https://lzxzl.github.io/post/fan-yi-yu-xue-xi-lets-build-a-simple-interpreter-part-9/">https://lzxzl.github.io/post/fan-yi-yu-xue-xi-lets-build-a-simple-interpreter-part-9/</a></span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x534F;&#x8BAE;:</span>
                                                    <span>MIT License</span>
                                                </p>
                                            </section>
                                            
                                                
                                                    
                                                                    <!--Share-->
                                                                    <span style="margin-right:15px">
                        <i class="post-share"></i>
                        <span>&#x5206;&#x4EAB;:</span>
                                                                    <a title="QR ç " target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://lzxzl.github.io/post/fan-yi-yu-xue-xi-lets-build-a-simple-interpreter-part-9/"><i class="fa fa-qrcode"></i></a>
                                                                    <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://lzxzl.github.io/post/fan-yi-yu-xue-xi-lets-build-a-simple-interpreter-part-9/&sharesource=qzone&title=[ç¿»è¯‘ä¸å­¦ä¹ ] Let&#39;s Build A Simple Interpreter. Part 9&pics=https://lzxzl.github.io/images/avatar.png?v=1747748455692&summary="><i class="fa fa-qq"></i></a>
                                                                    <a title="æ–°æµªå¾®åš" target="_blank" href="https://service.weibo.com/share/share.php?url=https://lzxzl.github.io/post/fan-yi-yu-xue-xi-lets-build-a-simple-interpreter-part-9/&sharesource=weibo&title=[ç¿»è¯‘ä¸å­¦ä¹ ] Let&#39;s Build A Simple Interpreter. Part 9 + " - " + &pic="https://lzxzl.github.io/images/avatar.png?v=1747748455692 "><i class="fa fa-weibo "></i></a>

                                                                    </span>
                                                                    
                                                                            <!--zh-->
                                                                            <section class="post-tags zh ">
                                                                                <div>
                                                                                    <span>&#x6807;&#x7B7E;:</span>
                                                                                    <span class="tag ">
                        
                        
                        <a href="https://lzxzl.github.io/tag/GqQg6_YXk/">#
                    ç¼–è¯‘åŸç†
                        </a>
                        
                            
                                </span>
                                                                                </div>
                                                                                <div>
                                                                                    <a href="javascript:window.history.back();">
                        &#x8FD4;&#x56DE;</a>
                                                                                    <span>&dot;</span>
                                                                                    <a href="#">&#x4E3B;&#x9875;</a>
                                                                                </div>
                                                                            </section>

                                                                            
                                                                                <!---->
                                                                                <section class="post-nav">
                                                                                    
                                                                                        <a class="prev" rel="prev" href="https://lzxzl.github.io/post/fan-yi-yu-xue-xi-lets-build-a-simple-interpreter-part-10/">
                                                                                            [ç¿»è¯‘ä¸å­¦ä¹ ] Letâ€™s Build A Simple Interpreter. Part 10.
                                                                                        </a>
                                                                                        
                                                                                            
                                                                                                <a class="next" rel="next" href="https://lzxzl.github.io/post/fan-yi-yu-xue-xi-lets-build-a-simple-interpreter-part-8/">
                                                                                                    [ç¿»è¯‘ä¸å­¦ä¹ ] Let&#39;s Build A Simple Interpreter. Part 8.
                                                                                                </a>
                                                                                                
                                                                                </section>
                    </article>
                </div>
                
                    
                        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container" style="width: 100%;max-width: 780px;margin: auto;"></div>

<script>
    var gitalk = new Gitalk({
        clientID: '2a44a295dd16ae7d05b8',
        clientSecret: '8030257bc11446a193cf383767567daca0e26312',
        repo: 'lzxzl.github.io',
        owner: 'lzxzl',
        admin: ['lzxzl'],
        id: (location.pathname).substring(0, 49), // Ensure uniqueness and length less than 50
        distractionFreeMode: false // Facebook-like distraction free mode
    })

    gitalk.render('gitalk-container')
</script>
                            
                                        
                                            
            </div>
    </div>
    </div>
    </div>
    
        <footer id="footer" class="footer">
            <div class="copyright">
                
                        ztree
                            
                                        <svg viewBox="0 0 1024 1024" style="margin-left: 5px;margin-right: 5px;" version="1.0" width="8" height="8" class="my-face">
            <path
                d="M863.597631 513.574282l-271.33965-140.213484L729.783667 81.926656c3.583731-7.87141 7.167462-15.742819 7.167462-25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0-39.293053 12.607055c-1.791866 1.59988-3.519736 3.19976-5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0-19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c-12.479064 25.214109-1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591-4.735645 44.604655-15.742819l480.091993-403.297753a55.547834 55.547834 0 0 0 19.646526-47.228458 61.243407 61.243407 0 0 0-32.12559-44.156688z"
                fill="#93b5cf"></path>
        </svg>
                                        ztree &copy;Copyright
                                            <script>
                                                var date = new Date();
                                                document.write("" + date.getFullYear());
                                            </script>
                                            | Powered by
                                            <a href="https://lzxzl.github.io/" target="_blank">
                                                ztree
                                            </a>
            </div>
            <div id="update" style="display:none;">
                off
            </div>
            
                    <script>
                        var port = '';
                        
                        document.write('<div id="home_path" style="display:none;">' + document.location.protocol + '//' + window.document.location.hostname + port + '</div>')
                    </script>
        </footer>
        
                <script>
                    
                    
                    
                    getStar();
                    hljs.initHighlighting();
                    console.clear();
                    
                    var newDate = new Date();
                    newDate.setTime(1747748455692);
                    console.log(" Blog Update Time: " + newDate.toLocaleDateString());
                    console.log("\n %c \u26a1Theme:Chic Author's Blog:https://blog.itjoker.cn  Write By ITJoker  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;");
                </script>
        </div>
</body>
<script>
    scroll();
</script>

</html>